<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quantum Tic-Tac-Toe</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <audio id="backgroundMusic" loop>
        <source src="assets/audio.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="quantumMoveSound">
        <source src="assets/shock.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Modal for Tutorial -->
    <div id="tutorialModal" class="tutorial-modal">
        <div class="tutorial-modal-content">
            <span class="tutorial-close">&times;</span>
            <h2>Tutorial</h2>
            <p id="tutorialMessage"></p>
            <button id="tutorialNext">Nxxt</button>
        </div>
    </div>

    <div id="gameContainer">
        <h1>Quantum Tic-Tac-Toe</h1>
        <div id="gameStatus">Player X's Turn</div>
        <div id="boardContainer">
            <svg id="entanglements">
                <defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3.5" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
            </svg>
            <div id="board">
                <!-- 9 cells -->
                <div class="cell quantum" data-index="0"></div>
                <div class="cell quantum" data-index="1"></div>
                <div class="cell quantum" data-index="2"></div>
                <div class="cell quantum" data-index="3"></div>
                <div class="cell quantum" data-index="4"></div>
                <div class="cell quantum" data-index="5"></div>
                <div class="cell quantum" data-index="6"></div>
                <div class="cell quantum" data-index="7"></div>
                <div class="cell quantum" data-index="8"></div>
            </div>
        </div>
        <div id="controls">
            <button id="classicalMove">Classical Move</button>
            <button id="quantumMove">Quantum Move</button>
            <button id="reset">Reset Game</button>
            <button id="rulesButton">Rules</button>
        </div>
        <div id="message"></div>
    </div>

    <!-- Modal for Rules -->
    <div id="rulesModal" class="rules-modal">
        <div class="rules-modal-content">
            <span class="close">&times;</span>
            <h2>Welcome to Quantum Tic-Tac-Toe, wizard!</h2>
            <div class="rules-sections">
                <div class="rules-box">
                    <h3>Storyline</h3>
                    <p>
                        Unlike the Muggle Tic-tac-toe, here each box is hidden from you. They start in a state of both X and O, a <strong>SUPERPOSITION</strong> of states. This state will collapse into either X or O (a <strong>CLASSICAL</strong> state) when you decide to look into the box.
                    </p>
                    <p>
                        But, that's not it. It is not all luck. Your outcome is in your hands. Wave your wand and entangle your boxes with each other, so you can affect boxes that you did not even look into ... boxes far, far, away from you.
                    </p>
                    <p>
                        But beware! It may go against you as well.
                    </p>
                </div>
                <div class="rules-box">
                    <h3>Moves</h3>
                    <p>
                        <p>
                            <strong>Classical Move:</strong> Collapse a quantum state to either 'X' or 'O' with equal probability.
                        </p>
                        <p>
                            <strong>Quantum Move:</strong> Entangle a control box (quantum state) with a target box (classical state). If the control box collapses to the player's favored state when measured, the target box state "reverses", i.e. O becomes X, and X becomes O (strategize here!).
                        </p>
                    </p>
                    <p>
                        <strong>Favored States:</strong>
                        <p>
                            <strong>Player X:</strong> Favored state is 'X'.<br>
                            <strong>Player O:</strong> Favored state is 'O'.
                    </p>
                </div>
                <div class="rules-box">
                    <h3>Winning</h3>
                    <p>
                        <strong>Winning Condition:</strong> Align three of your marks ('X' or 'O') in a row, column, or diagonal.
                    </p>
                    <p>
                        <strong>Game Start:</strong> Player X begins with a classical move.
                    </p>
                    <p>
                        Strategize your moves considering entanglements that can affect future state collapses.
                    </p>
                </div>
            </div>
            <h2>Challenge. Strategize. Win!</h2>
            <button id="playGameButton">Play Game</button>
        </div>
    </div>

    <!-- Modal for Sound -->
    <div id="soundPromptModal" class="sound-modal">
        <div class="sound-modal-content">
            <h2>Enable sound to enjoy the best user experience.</p>
            <button id="playInitialMusicButton">
                <img src="assets/loudspeaker_strike.png" alt="Play Music">
            </button>
        </div>
    </div>

    <button id="playMusicButton" style="display: none;">
        <img src="assets/loudspeaker_strike.png" alt="Play Music" id="playIcon" style="display: none">
        <img src="assets/loudspeaker.png" alt="Pause Music" id="pauseIcon" style="display: block">
    </button>

    <footer>
        &copy Shah Jahan Ishaq | CCST9077
    </footer>

    <script src="script.js"></script>
</body>
</html>